<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Student Marksheet Dashboard</title>
    <!-- Import Tailwind CSS -->
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        /* Custom styles for a slightly better look */
        body {
            font-family: 'Inter', sans-serif;
        }
        /* Add a subtle animation for rows appearing */
        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(-10px); }
            to { opacity: 1; transform: translateY(0); }
        }
        .fade-in-row {
            animation: fadeIn 0.3s ease-out;
        }

        /* Styles for Admin Mode (No longer used, but harmless) */
        #admin-panel,
        .admin-action {
            display: none;
        }
    </style>
</head>
<body class="bg-gray-100 text-gray-900">

    <!-- Header -->
    <header class="bg-white shadow-md">
        <nav class="container mx-auto px-4 sm:px-6 lg:px-8">
            <div class="flex items-center justify-between h-16">
                <h1 class="text-2xl font-bold text-blue-600">Student Marksheet Dashboard</h1>
                <!-- Admin and Status indicators removed -->
            </div>
        </nav>
    </header>

    <!-- Main Content -->
    <main class="container mx-auto px-4 sm:px-6 lg:px-8 py-8">
        
        <!-- Grid container -->
        <div class="grid grid-cols-1 lg:grid-cols-3 gap-8">

            <!-- Column 1: Add Student Form (REMOVED) -->
            
            <!-- Column 2: Student List Table -->
            <!-- This container now spans the full width -->
            <div class="lg:col-span-3 bg-white p-6 rounded-lg shadow-lg" id="student-list-container">
                <div class="flex flex-col sm:flex-row justify-between items-center mb-4 border-b pb-2">
                    <h2 class="text-xl font-semibold">Student List</h2>
                    <div class="mt-2 sm:mt-0 w-full sm:w-auto">
                        <input type="text" id="search-input" placeholder="Search by name, ID, roll..." class="block w-full sm:w-64 px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500 sm:text-sm">
                    </div>
                </div>
                
                <!-- This container ensures the table is responsive -->
                <div class="overflow-x-auto">
                    <table class="min-w-full divide-y divide-gray-200">
                        <thead class="bg-gray-50">
                            <tr>
                                <th scope="col" class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Name</th>
                                <th scope="col" class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Student ID</th>
                                <th scope="col" class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Roll</th>
                                <th scope="col" class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Registration</th>
                                <th scope="col" class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Marksheet</th>
                                <!-- Admin-only Actions Column (REMOVED) -->
                            </tr>
                        </thead>
                        <tbody id="student-list" class="bg-white divide-y divide-gray-200">
                            <!-- Rows will be dynamically inserted here by JavaScript -->
                            <tr>
                                <!-- Colspan updated from 6 to 5 -->
                                <td colspan="5" class="px-6 py-4 whitespace-nowrap text-sm text-gray-500 text-center">
                                    Loading student data...
                                </td>
                            </tr>
                        </tbody>
                    </table>
                </div>
            </div>

        </div>
    </main>

    <!-- All Modals (Delete, Edit, Admin Login) have been REMOVED -->

    
    <!-- App JavaScript -->
    <script>
        // --- Hardcoded Student Data ---
        // You can add or edit student info here
        const studentDataCache = new Map();
        studentDataCache.set('doc1', {
            name: "Alice Smith",
            studentId: "S1001",
            roll: "R001",
            registration: "REG12345",
            marksheetUrl: "https://example.com/marksheet/alice.pdf"
        });
        studentDataCache.set('doc2', {
            name: "Bob Johnson",
            studentId: "S1002",
            roll: "R002",
            registration: "REG12346",
            marksheetUrl: "https://example.com/marksheet/bob.pdf"
        });
        studentDataCache.set('doc3', {
            name: "Charlie Brown",
            studentId: "S1003",
            roll: "R003",
            registration: "REG12347",
            marksheetUrl: "https://example.com/marksheet/charlie.pdf"
        });
        studentDataCache.set('doc4', {
            name: "David Lee",
            studentId: "S1004",
            roll: "R004",
            registration: "REG12348",
            marksheetUrl: "https://example.com/marksheet/david.pdf"
        });
        studentDataCache.set('doc5', {
            name: "Eve Davis",
            studentId: "S1005",
            roll: "R005",
            registration: "REG12349",
            marksheetUrl: "https://example.com/marksheet/eve.pdf"
        });


        // --- DOM References ---
        const studentListBody = document.getElementById('student-list');
        const searchInput = document.getElementById('search-input');
        const studentListContainer = document.getElementById('student-list-container');

        // --- Main App Function ---
        function main() {
            // Note: Layout is already full-width due to lg:col-span-3,
            // but we'll keep this in case the class was different.
            studentListContainer.classList.remove('lg:col-span-2');
            studentListContainer.classList.add('lg:col-span-3');

            // --- Setup Search Listener ---
            searchInput.addEventListener('input', () => {
                renderTable(); // Re-render the table on every keystroke
            });

            // Initial render
            renderTable();
            
            console.log("Static dashboard initialized.");
        }

        // --- Render: Re-filter and render the entire table ---
        function renderTable() {
            const searchTerm = searchInput.value.toLowerCase().trim();
            
            // Clear existing table data
            studentListBody.innerHTML = '';
            
            if (studentDataCache.size === 0) {
                studentListBody.innerHTML = `
                    <tr>
                        <td colspan="5" class="px-6 py-4 whitespace-nowrap text-sm text-gray-500 text-center">
                            No student data found.
                        </td>
                    </tr>
                `;
                return;
            }

            let resultsFound = false;
            
            // Loop through the *cached* data and render
            studentDataCache.forEach((student, docId) => {
                // Ensure data exists before calling toLowerCase()
                const name = student.name ? student.name.toLowerCase() : '';
                const studentId = student.studentId ? student.studentId.toLowerCase() : '';
                const roll = student.roll ? student.roll.toLowerCase() : '';
                const registration = student.registration ? student.registration.toLowerCase() : '';

                const matchesSearch = searchTerm === '' ||
                                      name.includes(searchTerm) ||
                                      studentId.includes(searchTerm) ||
                                      roll.includes(searchTerm) ||
                                      registration.includes(searchTerm);

                if (matchesSearch) {
                    renderStudentRow(docId, student);
                    resultsFound = true;
                }
            });

            if (!resultsFound && searchTerm !== '') {
                 studentListBody.innerHTML = `
                    <tr>
                        <td colspan="5" class="px-6 py-4 whitespace-nowrap text-sm text-gray-500 text-center">
                            No students match your search for "${searchInput.value}".
                        </td>
                    </tr>
                `;
            }
        }

        // --- Render: Create and append a table row for a student ---
        function renderStudentRow(docId, student) {
            const tr = document.createElement('tr');
            tr.className = 'fade-in-row'; // Add animation class
            tr.setAttribute('data-id', docId);

            // Format marksheet URL into a viewable link
            const url = student.marksheetUrl;
            const marksheetCellHtml = url 
                ? `<a href="${url}" target="_blank" rel="noopener noreferrer" class="text-blue-600 hover:text-blue-800 hover:underline">View PDF</a>`
                : `<span class="text-gray-400">N/A</span>`;

            // Simplified row without admin buttons
            tr.innerHTML = `
                <td class="px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900">${student.name}</td>
                <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-500">${student.studentId}</td>
                <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-500">${student.roll}</td>
                <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-500">${student.registration}</td>
                <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-500">${marksheetCellHtml}</td>
            `;
            
            studentListBody.appendChild(tr);
        }

        // --- Run the app ---
        // Run after DOM is loaded
        document.addEventListener('DOMContentLoaded', main);

    </script>
</body>
</html>